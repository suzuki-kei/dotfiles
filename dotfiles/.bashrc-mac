#!/bin/bash

# ------------------------------------------------------------------------------
#  Homebrew
# ------------------------------------------------------------------------------

# see https://github.com/Homebrew/brew/blob/master/docs/Analytics.md
export HOMEBREW_NO_ANALYTICS=1

if which brew > /dev/null; then
    declare -r BREW_PREFIX="$(brew --prefix)"

    # brew install bash-completion
    source "${BREW_PREFIX}/etc/profile.d/bash_completion.sh"

    # brew install coreutils
    export PATH="${BREW_PREFIX}/opt/coreutils/libexec/gnubin:$PATH"
    export MANPATH="${BREW_PREFIX}/opt/coreutils/libexec/gnuman:$MANPATH"

    # brew install findutils
    export PATH="${BREW_PREFIX}/opt/findutils/libexec/gnubin:$PATH"
    export MANPATH="${BREW_PREFIX}/opt/findutils/libexec/gnuman"

    # brew install gnu-sed
    export PATH="${BREW_PREFIX}/opt/gnu-sed/libexec/gnubin:$PATH"
    export MANPATH="${BREW_PREFIX}/opt/gnu-sed/libexec/gnuman"

    # brew install gawk
    export PATH="${BREW_PREFIX}/opt/gawk/libexec/gnubin:$PATH"
    export MANPATH="${BREW_PREFIX}/opt/gawk/libexec/gnuman"

    # brew install grep
    export PATH="${BREW_PREFIX}/opt/grep/libexec/gnubin:$PATH"
    export MANPATH="${BREW_PREFIX}/opt/grep/libexec/gnuman:$MANPATH"

    # brew install python@3.11
    export PATH="${BREW_PREFIX}/opt/python3/bin:$PATH"
    export LDFLAGS="-L${BREW_PREFIX}/opt/python3/lib"
    export PKG_CONFIG_PATH="${BREW_PREFIX}/opt/python3/lib/pkgconfig"

    # brew install ruby
    export PATH="${BREW_PREFIX}/opt/ruby/bin:$PATH"
    export LDFLAGS="-L${BREW_PREFIX}/opt/ruby/lib"
    export CPPFLAGS="-I${BREW_PREFIX}/opt/ruby/include"
    export PKG_CONFIG_PATH="${BREW_PREFIX}/opt/ruby/lib/pkgconfig"

    # brew install util-linux
    export PATH="${BREW_PREFIX}/opt/util-linux/bin:$PATH"
    export PATH="${BREW_PREFIX}/opt/util-linux/sbin:$PATH"
fi

# brew install rbenv
if [[ -d "$HOME/.rbenv/shims" ]]; then
    export PATH="$HOME/.rbenv/shims:$PATH"
fi

