#!/bin/bash

set -eu

function g
{
    local target="$@"
    local chrome_options="--args --incognito"

    case "${target}" in
        "")
            local url="chrome://chrome-urls/"
            ;;
        http*)
            local url="${target}"
            ;;
        *)
            local keyword=$(echo -n ${target} | jq -sMRr '@uri')
            local url="https://www.google.com/search?q=${keyword}"
            ;;
    esac

    open -n -a "Google Chrome" ${chrome_options} "${url}"
}

g "$@"

